{% extends "base.html" %}

{% block title %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —É—á–µ–Ω–∏–∫–∞ - Alien Tutor{% endblock %}

{% block styles %}

{% endblock %}

{% block content %}
    <div class="dashboard-container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
        <div class="dashboard-header">
            <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —É—á–µ–Ω–∏–∫–∞</h1>
            <p class="welcome-text">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ student.name }}! –ö–ª–∞—Å—Å: {{ student.class }}</p>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤–∫–ª–∞–¥–∫–∞–º -->
        <div class="tabs-navigation">
            <button class="tab-button active" data-tab="schedule">
                <span class="tab-text">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
            </button>
            <button class="tab-button" data-tab="progress">
                <span class="tab-text">–£—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å</span>
            </button>
            <button class="tab-button" data-tab="game">
                <span class="tab-text">–ò–≥—Ä–∞</span>
            </button>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ -->
        <div class="tabs-content">

            <!-- –í–∫–ª–∞–¥–∫–∞: –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ -->
            <div class="tab-content active" id="schedule-tab">
                <!-- –§—É—Ç—É—Ä–∏—Å—Ç–∏—á–Ω–∞—è –ø–∞–Ω–µ–ª—å –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π -->
                <div class="futuristic-panel">
                    <div class="panel-icon-left">
                        <div class="icon-circle">
                            <svg class="action-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                        </div>
                        <div class="icon-tooltip tooltip-right">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —É—Ä–æ–∫—É</div>
                    </div>
                    
                    <div class="connecting-line-left"></div>
                    
                    <div class="central-panel">
                        <span>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</span>
                    </div>
                    
                    <div class="connecting-line-right"></div>
                    
                    <div class="panel-icon-right">
                        <div class="icon-circle">
                            <svg class="action-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="3" y="4" width="18" height="12" rx="1" ry="1"></rect>
                                <line x1="7" y1="8" x2="17" y2="8"></line>
                                <line x1="7" y1="12" x2="13" y2="12"></line>
                                <path d="M8 21l-2-5h12l-2 5"></path>
                            </svg>
                        </div>
                        <div class="icon-tooltip tooltip-left">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ—Å–∫–∞</div>
                    </div>
                </div>
                
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—á–µ–Ω–∏–∫–∞ -->
                <div class="student-stats">
                    <!-- –ü–µ—Ä–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ -->
                    <div class="stats-card">
                        <div class="stats-value">{{ student.planned_lessons }}</div>
                        <div class="stats-label">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –≤ –º–µ—Å—è—Ü–µ</div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-value">{{ student.cancelled_lessons }}</div>
                        <div class="stats-label">–û—Ç–º–µ–Ω–µ–Ω–æ —É—Ä–æ–∫–æ–≤</div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-value">{{ student.lessons_in_stock }}</div>
                        <div class="stats-label">–ó–∞–ø–∞—Å —É—Ä–æ–∫–æ–≤</div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-value">{{ student.completed_lessons }}</div>
                        <div class="stats-label">–ü—Ä–æ–≤–µ–¥–µ–Ω–æ —É—Ä–æ–∫–æ–≤</div>
                    </div>
                </div>

                <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π -->
                <div class="schedule-container">
                    <h2>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π</h2>
                    
                    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å -->
                    <div class="schedule-controls">
                        <button class="nav-btn">‚Üê –ù–∞–∑–∞–¥</button>
                        
                        <div class="schedule-info">
                            <span class="current-period">{{ student.schedule.week_info.title }}</span>
                            <div class="view-toggle">
                                <button class="toggle-btn active">–ù–µ–¥–µ–ª—è</button>
                                <button class="toggle-btn">–ú–µ—Å—è—Ü</button>
                            </div>
                        </div>
                        
                        <button class="nav-btn">–í–ø–µ—Ä–µ–¥ ‚Üí</button>
                    </div>

                    <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä–Ω–∞—è —Å–µ—Ç–∫–∞ -->
                    <div class="schedule-grid">
                        {% for day in student.schedule.week_data %}
                        <div class="day-column {% if day.is_today %}today{% endif %}">
                            <div class="day-header">
                                <div class="day-name">{{ day.day_name }}</div>
                                <div class="day-date">{{ day.day_number }}</div>
                                {% if day.is_today %}
                                    <div class="today-badge">–°–µ–≥–æ–¥–Ω—è</div>
                                {% endif %}
                            </div>
                            <div class="lessons-list">
                                {% if day.lessons %}
                                    {% for lesson in day.lessons %}
                                    <div class="lesson-item-placeholder">
                                        <div class="lesson-time">{{ lesson.time }}</div>
                                        <div class="lesson-subject">{{ lesson.subject }}</div>
                                        {% if lesson.status == 'cancelled' %}
                                            <div class="lesson-status">–û—Ç–º–µ–Ω–µ–Ω</div>
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                                {% else %}
                                    <div class="lesson-placeholder">–ù–µ—Ç –∑–∞–Ω—è—Ç–∏–π</div>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –£—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å -->
            <div class="tab-content" id="progress-tab">
                <!-- –í—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞ (–¥–ª—è –¥–µ–º–æ) -->
                <div class="class-selector">
                    <h2>–£—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å</h2>
                    <div class="class-buttons">
                        <button class="class-btn active" data-class="9">9 –∫–ª–∞—Å—Å</button>
                        <button class="class-btn" data-class="11">11 –∫–ª–∞—Å—Å</button>
                        <button class="class-btn" data-class="8">8 –∫–ª–∞—Å—Å</button>
                        <button class="class-btn" data-class="7">7 –∫–ª–∞—Å—Å</button>
                    </div>
                </div>

                <!-- –î–∏–∞–≥—Ä–∞–º–º—ã -->
                <div class="charts-container">
                    <!-- –°—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ (—Ç–æ–ª—å–∫–æ 9-11 –∫–ª–∞—Å—Å—ã) -->
                    <div class="chart-section bar-chart-section">
                        <h3>–ë–∞–ª–ª—ã –∑–∞ –ø—Ä–æ–±–Ω–∏–∫–∏ –û–ì–≠/–ï–ì–≠</h3>
                        <div class="chart-wrapper">
                            <div class="bar-chart" id="barChart">
                                <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- –ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ (–≤—Å–µ –∫–ª–∞—Å—Å—ã) -->
                    <div class="chart-section pie-chart-section">
                        <h3>–ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–µ–º</h3>
                        <div class="chart-wrapper">
                            <div class="pie-chart" id="pieChart">
                                <svg viewBox="0 0 200 200" width="200" height="200">
                                    <!-- –ö—Ä—É–≥ –±—É–¥–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω JavaScript -->
                                </svg>
                                <div class="pie-legend">
                                    <div class="legend-item">
                                        <span class="legend-color" style="background: #10b981;"></span>
                                        <span>–¢–µ–º–∞ —Ä–∞–∑–æ–±—Ä–∞–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é</span>
                                    </div>
                                    <div class="legend-item">
                                        <span class="legend-color" style="background: #f59e0b;"></span>
                                        <span>–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ–º–µ</span>
                                    </div>
                                    <div class="legend-item">
                                        <span class="legend-color" style="background: #ef4444;"></span>
                                        <span>–¢–µ–º—É –Ω—É–∂–Ω–æ –∑–∞–∫—Ä–µ–ø–∏—Ç—å</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –¢–∞–±–ª–∏—Ü–∞ —É—Ä–æ–∫–æ–≤ -->
                <div class="lessons-table-section">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã—Ö —É—Ä–æ–∫–æ–≤</h3>
                    <div class="table-wrapper">
                        <table class="lessons-table">
                            <thead>
                                <tr>
                                    <th>–î–∞—Ç–∞ —É—Ä–æ–∫–∞</th>
                                    <th>–ü—Ä–æ–π–¥–µ–Ω–Ω–∞—è —Ç–µ–º–∞</th>
                                    <th>–ö—Ä–∞—Ç–∫–∏–π –≤—ã–≤–æ–¥</th>
                                    <th class="score-column">–ë–∞–ª–ª—ã –∑–∞ –ø—Ä–æ–±–Ω–∏–∫</th>
                                    <th>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –≤—ã–≤–æ–¥</th>
                                </tr>
                            </thead>
                            <tbody id="lessonsTableBody">
                                {% if student.lesson_reports %}
                                    {% for lesson in student.lesson_reports %}
                                    <tr>
                                        <td>{{ lesson.date }}</td>
                                        <td>{{ lesson.topic }}</td>
                                        <td>{{ lesson.understanding }}</td>
                                        <td class="score-cell">{{ lesson.score }}</td>
                                        <td>{{ lesson.feedback }}</td>
                                    </tr>
                                    {% endfor %}
                                {% else %}
                                    <tr>
                                        <td colspan="5" style="text-align: center; color: var(--text-muted); font-style: italic;">
                                            –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ–± —É—Ä–æ–∫–∞—Ö
                                        </td>
                                    </tr>
                                {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π -->
                <div class="homework-table-section">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π</h3>
                    <div class="table-wrapper">
                        <table class="lessons-table homework-table">
                            <thead id="homeworkTableHeader">
                                <tr>
                                    <th>–î–∞—Ç–∞ –∑–∞–¥–∞–Ω–∏—è</th>
                                    <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                    <th>–°—Ç–∞—Ç—É—Å</th>
                                    <th>–û—Ü–µ–Ω–∫–∞</th>
                                </tr>
                            </thead>
                            <tbody id="homeworkTableBody">
                                {% if student.homework_data %}
                                    {% for hw in student.homework_data %}
                                    <tr>
                                        <td>{{ hw.date }}</td>
                                        <td>{{ hw.description }}</td>
                                        <td>{{ hw.status }}</td>
                                        <td>{{ hw.score }}</td>
                                    </tr>
                                    {% endfor %}
                                {% else %}
                                    <tr>
                                        <td colspan="4" style="text-align: center; color: var(--text-muted); font-style: italic;">
                                            –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏—è—Ö
                                        </td>
                                    </tr>
                                {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ò–≥—Ä–∞ -->
            <div class="tab-content" id="game-tab">
                <div class="content-section">
                    <h2>üéÆ –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ª–∞–±–∏—Ä–∏–Ω—Ç</h2>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <a href="/game" target="_blank" class="glass-button game-launch-btn" style="display: inline-block; max-width: 300px; text-decoration: none;">
                            <div class="button-title">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É</div>
                            <div class="button-subtitle">–ù–∞—á–∞—Ç—å –∫–æ—Å–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</div>
                        </a>
                    </div>
                </div>
                
                <div class="content-section">
                    <h2>üèÜ –¢–≤–æ–π —Ä–µ–π—Ç–∏–Ω–≥</h2>
                    <div class="rating-placeholder">
                        <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è:</p>
                        <ul>
                            <li>–¢–≤–æ—è –ø–æ–∑–∏—Ü–∏—è –≤ –æ–±—â–µ–º —Ä–µ–π—Ç–∏–Ω–≥–µ</li>
                            <li>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤ –∑–∞ –∏–≥—Ä—É</li>
                            <li>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –∑–Ω–∞—á–∫–∏</li>
                            <li>–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Ä–µ—à–µ–Ω–Ω—ã–º –∑–∞–¥–∞—á–∞–º</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
<script>
// –î–∞–Ω–Ω—ã–µ –∏–∑ Python
const examResults = {{ student.exam_results | tojson | safe }};
const topicProgress = {{ student.topic_progress | tojson | safe }};
const currentClass = {{ student.class | tojson | safe }};

// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
let currentSelectedClass = '9';

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Å—Ç–æ–ª–±—á–∞—Ç–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã
function renderBarChart() {
    const barChart = document.getElementById('barChart');
    barChart.innerHTML = '';
    
    if (!examResults || examResults.length === 0) {
        barChart.innerHTML = '<div class="no-data">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–±–Ω–∏–∫–∞—Ö</div>';
        return;
    }
    
    const maxScore = Math.max(...examResults.map(item => item.score));
    const chartHeight = 200;
    
    examResults.forEach(item => {
        const barHeight = (item.score / maxScore) * chartHeight;
        
        const barContainer = document.createElement('div');
        barContainer.className = 'bar-container';
        barContainer.style.cssText = `
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 5px;
            min-width: 40px;
        `;
        
        const bar = document.createElement('div');
        bar.className = 'bar';
        bar.style.cssText = `
            width: 30px;
            height: ${barHeight}px;
            background: linear-gradient(45deg, #00d4ff, #7c3aed);
            border-radius: 4px 4px 0 0;
            margin-bottom: 5px;
            transition: all 0.3s ease;
            cursor: pointer;
        `;
        
        const scoreLabel = document.createElement('div');
        scoreLabel.textContent = item.score;
        scoreLabel.style.cssText = `
            font-size: 12px;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 5px;
        `;
        
        const dateLabel = document.createElement('div');
        dateLabel.textContent = item.date;
        dateLabel.style.cssText = `
            font-size: 10px;
            color: var(--text-muted);
            transform: rotate(-45deg);
            margin-top: 10px;
        `;
        
        barContainer.appendChild(bar);
        barContainer.appendChild(scoreLabel);
        barContainer.appendChild(dateLabel);
        
        barChart.appendChild(barContainer);
    });
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∫—Ä—É–≥–æ–≤–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã
function renderPieChart() {
    const pieChart = document.querySelector('#pieChart svg');
    const total = topicProgress.fully + topicProgress.questions + topicProgress.needWork;
    
    if (total === 0) {
        pieChart.innerHTML = '<text x="100" y="100" text-anchor="middle" fill="var(--text-muted)">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</text>';
        return;
    }
    
    const colors = {
        fully: '#10b981',
        questions: '#f59e0b', 
        needWork: '#ef4444'
    };
    
    let cumulativePercentage = 0;
    let segments = '';
    
    Object.entries(topicProgress).forEach(([key, value]) => {
        if (value > 0) {
            const percentage = value / total;
            const angle = percentage * 360;
            
            const x1 = 100 + 80 * Math.cos((cumulativePercentage * 360 - 90) * Math.PI / 180);
            const y1 = 100 + 80 * Math.sin((cumulativePercentage * 360 - 90) * Math.PI / 180);
            
            const x2 = 100 + 80 * Math.cos(((cumulativePercentage + percentage) * 360 - 90) * Math.PI / 180);
            const y2 = 100 + 80 * Math.sin(((cumulativePercentage + percentage) * 360 - 90) * Math.PI / 180);
            
            const largeArc = percentage > 0.5 ? 1 : 0;
            
            segments += `
                <path d="M 100 100 L ${x1} ${y1} A 80 80 0 ${largeArc} 1 ${x2} ${y2} Z"
                      fill="${colors[key]}" 
                      stroke="var(--bg-primary)" 
                      stroke-width="2"/>
            `;
            
            cumulativePercentage += percentage;
        }
    });
    
    pieChart.innerHTML = segments;
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤
document.addEventListener('DOMContentLoaded', function() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º
    renderBarChart();
    renderPieChart();
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫–ª–∞—Å—Å–æ–≤
    document.querySelectorAll('.class-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.class-btn').forEach(b => b.classList.remove('active'));
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –Ω–∞–∂–∞—Ç–æ–π –∫–Ω–æ–ø–∫–µ
            this.classList.add('active');
            
            currentSelectedClass = this.dataset.class;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º —Å—Ç–æ–ª–±—á–∞—Ç—É—é –¥–∏–∞–≥—Ä–∞–º–º—É –¥–ª—è 9-11 –∫–ª–∞—Å—Å–æ–≤
            const barChartSection = document.querySelector('.bar-chart-section');
            if (currentSelectedClass === '9' || currentSelectedClass === '11') {
                barChartSection.style.display = 'block';
                renderBarChart();
            } else {
                barChartSection.style.display = 'none';
            }
        });
    });
    
    // –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç–æ–ª–±—á–∞—Ç—É—é –¥–∏–∞–≥—Ä–∞–º–º—É –µ—Å–ª–∏ –Ω–µ 9-11 –∫–ª–∞—Å—Å
    const barChartSection = document.querySelector('.bar-chart-section');
    if (currentSelectedClass !== '9' && currentSelectedClass !== '11') {
        barChartSection.style.display = 'none';
    }
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
document.querySelectorAll('.tab-button').forEach(button => {
    button.addEventListener('click', function() {
        const tabName = this.dataset.tab;
        
        // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –Ω–∞–∂–∞—Ç–æ–π –∫–Ω–æ–ø–∫–µ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É
        this.classList.add('active');
        document.getElementById(tabName + '-tab').classList.add('active');
    });
});
</script>
{% endblock %}